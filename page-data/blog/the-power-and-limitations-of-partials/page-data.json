{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/the-power-and-limitations-of-partials","result":{"data":{"site":{"siteMetadata":{"title":"Ken Powers","siteUrl":"https://knpw.rs"}},"markdownRemark":{"html":"<p><em>Partially applied functions</em>, or <em>partials</em> for short, are functions with\npre-set arguments. The use of partials is very common in functional\nprogramming and has been implemented in several JavaScript libraries and more\nrecently in ECMAScript 5 through <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\" title=\"Function.prototype.bind\"><code class=\"language-text\">Function.prototype.bind</code></a>. Consider\nthe following examples:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Adds two numbers</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span> b</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> a <span class=\"token operator\">+</span> b<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Let's make some partials!</span>\n<span class=\"token comment\">// Underscore.js</span>\n<span class=\"token keyword\">var</span> addTwo <span class=\"token operator\">=</span> _<span class=\"token punctuation\">.</span><span class=\"token function\">partial</span><span class=\"token punctuation\">(</span>add<span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Dojo.js</span>\n<span class=\"token keyword\">var</span> addFour <span class=\"token operator\">=</span> lang<span class=\"token punctuation\">.</span><span class=\"token function\">partial</span><span class=\"token punctuation\">(</span>add<span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// JavaScript 1.8.5</span>\n<span class=\"token keyword\">var</span> addSix <span class=\"token operator\">=</span> <span class=\"token function\">add</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">// Let's use our partials!</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">addTwo</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Logs 3</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">addFour</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Logs 7</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">addSix</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// Logs 11</span></code></pre></div>\n<p>In each of the above examples the original function is not modified -- rather,\na new function is created which calls the original function by concatenating\nthe pre-defined arguments with the call-time arguments. JavaScript's\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\" title=\"Function.prototype.bind\"><code class=\"language-text\">bind</code></a> works a little differently from Underscore's\n<a href=\"http://underscorejs.org/#partial\" title=\"Underscore.js - Partial\"><code class=\"language-text\">_.partial</code></a> and Dojo's <a href=\"http://dojotoolkit.org/reference-guide/1.9/dojo/_base/lang.html#partial\" title=\"Dojo lang.partial\"><code class=\"language-text\">lang.partial</code></a> in that its\nfirst argument becomes the value of <code class=\"language-text\">this</code> when the function is called. You\nwill need to use this if you are partially applying instance methods.\nUnderscore and Dojo provide similar functionality through <a href=\"http://underscorejs.org/#bind\" title=\"Underscore.js - Bind\"><code class=\"language-text\">_.bind</code></a>\nand <a href=\"http://dojotoolkit.org/reference-guide/1.9/dojo/_base/lang.html#hitch\" title=\"Dojo lang.hitch\"><code class=\"language-text\">lang.hitch</code></a> respectively. For the sake of simplicity, these\nfunctions will not be covered here.</p>\n<p>How about a more practical example? <a href=\"http://nodejs.org/\" title=\"Node.js\">Node.js</a> follows a convention for\nall asynchronous callbacks -- they are expected to take an error argument\nfollowed by a result argument. <a href=\"https://github.com/caolan/async\" title=\"Async.js\">Async.js</a>, a library which provides\nfunctions for dealing with asynchronous control flow and collection\nmanipulation, builds upon this convention with functions like\n<a href=\"https://github.com/caolan/async#parallel\" title=\"Async.js - parallel\"><code class=\"language-text\">parallel</code></a> and <a href=\"https://github.com/caolan/async#series\" title=\"Async.js - series\"><code class=\"language-text\">series</code></a> which take arrays of functions\nthat in turn take nothing but these conventional callbacks. Consider the\nfollowing examples:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Without partials</span>\nasync<span class=\"token punctuation\">.</span><span class=\"token function\">parallel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token comment\">// `done` accepts err, result</span>\n  <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foo.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> done<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">readFile</span><span class=\"token punctuation\">(</span><span class=\"token string\">'bar.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">,</span> done<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> results</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// err is the first thrown / passed error</span>\n  <span class=\"token comment\">// results is an array of results</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// With async's own partial implementation</span>\nasync<span class=\"token punctuation\">.</span><span class=\"token function\">parallel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token function\">async</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span>readFile<span class=\"token punctuation\">,</span> <span class=\"token string\">'foo.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">async</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span>readFile<span class=\"token punctuation\">,</span> <span class=\"token string\">'bar.txt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> results</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// same as before</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Async provides its own partial implementation by the name of <a href=\"https://github.com/caolan/async#apply\" title=\"Async.js - apply\"><code class=\"language-text\">apply</code></a>\nwhich is very similar to Underscore's implementation. By partially applying\n<code class=\"language-text\">fs.readFile</code> we are able to shorten the function signature from <code class=\"language-text\">filename,\nencoding, callback</code> to just <code class=\"language-text\">callback</code> enabling us to make an array of\npartials rather than manually declaring functions as in the first example.</p>\n<p>As a side note, you may have noticed that the last argument to\n<code class=\"language-text\">Async.parallel</code> is a Node-style callback. If you felt so inclined, you could\npartially apply <code class=\"language-text\">Async.parallel</code> and <code class=\"language-text\">Async.series</code> and pass those partials to\nother calls to <code class=\"language-text\">Async.parallel</code> and <code class=\"language-text\">Async.series</code>, as such:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">async<span class=\"token punctuation\">.</span><span class=\"token function\">series</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token function\">async</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>async<span class=\"token punctuation\">.</span>parallel<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// First group of parallel tasks</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token function\">async</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>async<span class=\"token punctuation\">.</span>parallel<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>\n    <span class=\"token comment\">// Second group of parallel tasks</span>\n  <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> results</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// err is the same as always</span>\n  <span class=\"token comment\">// results is an array of arrays</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>This code will run a group of tasks in parallel and when they are all done run\na second group of tasks in parallel. The final <code class=\"language-text\">results</code> array will be an\narray of arrays where each internal array contains the results of each group\nof tasks. You can easily change up this example to run two groups of serial\ntasks in parallel by changing all calls to <code class=\"language-text\">series</code> with <code class=\"language-text\">parallel</code> and vice\nversa. This will work for most functions provided by Async.</p>\n<p>On to a more practical example, can we read a bunch of files in parallel and\nonly have to write <code class=\"language-text\">async.apply</code> once? Of course! Enter\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" title=\"Array.prototype.map\"><code class=\"language-text\">Array.prototype.map</code></a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">async<span class=\"token punctuation\">.</span><span class=\"token function\">parallel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  <span class=\"token string\">'first.txt'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'second.txt'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'foo.txt'</span><span class=\"token punctuation\">,</span>\n  <span class=\"token string\">'bar.txt'</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">file</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">async</span><span class=\"token punctuation\">.</span><span class=\"token function\">apply</span><span class=\"token punctuation\">(</span>fs<span class=\"token punctuation\">.</span>readFile<span class=\"token punctuation\">,</span> file<span class=\"token punctuation\">,</span> <span class=\"token string\">'utf8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> results</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Same as before.</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In this example calling <code class=\"language-text\">map</code> on the array of file names returns an array of\npartially applied <code class=\"language-text\">fs.readfile</code> functions. Using this technique you can\ndynamically create a list of files and read them all into memory. Want to\nlimit the amount of files being read at once? That's what\n<a href=\"https://github.com/caolan/async#parallellimittasks-limit-callback\" title=\"Async.js - parallelLimit\"><code class=\"language-text\">parallelLimit</code></a> is for.</p>\n<h2>Limitations</h2>\n<p>So partials are pretty cool. But you have to be careful about how you use them\n(in JavaScript). In particular things can get tricky when you partially apply\nfunctions which take more arguments than you intend on passing. Consider the\nfollowing:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// This function multiplies all of its arguments together</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">multiply</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token class-name\">Array</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">.</span><span class=\"token function\">call</span><span class=\"token punctuation\">(</span>arguments<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">reduce</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">prev<span class=\"token punctuation\">,</span> cur</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> prev <span class=\"token operator\">*</span> cur<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// This function multiplies all of its arguments by each other and 2</span>\n<span class=\"token keyword\">var</span> mult2 <span class=\"token operator\">=</span> <span class=\"token function\">multiply</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// You might expect this to log [2, 4, 6, 8], but it actually logs [NaN, NaN, NaN, NaN]</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span>mult2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// The solution is to explicity call mult2 with the arguments you want to pass</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">v</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token function\">mult2</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Really, it's not fair to call this a limitation of partials but JavaScript\nfunctions in general -- we would have gotten a similar result had we not made\na partial. In my experience this problem appears more often when I am using\npartials than when I'm not. What is happening here is that the function passed\nto <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map\" title=\"Array.prototype.map\"><code class=\"language-text\">map</code></a> takes three arguments: <code class=\"language-text\">value</code>, <code class=\"language-text\">index</code>, and <code class=\"language-text\">array</code>. Our\nintention is to map each <code class=\"language-text\">value</code> to <code class=\"language-text\">2 * value</code> but instead we end up with\n<code class=\"language-text\">2 * value * index * array</code>. The solution is to explicitly pass the arguments\nyou want into the partial.</p>\n<p>Another point to note is that partials usually have a <code class=\"language-text\">length</code> of <code class=\"language-text\">0</code>. This\nmeans that they are declared without an arguments list. They still take\narguments but anything that checks for a partial's <code class=\"language-text\">length</code> property will more\nthan likely malfunction. For example, asynchronous tests in Mocha:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Some sort of function is declared somewhere as such:</span>\n<span class=\"token keyword\">var</span> <span class=\"token function-variable function\">asyncFunc</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">data<span class=\"token punctuation\">,</span> callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// do something and call callback per node convention;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// It may be tempting to test it in Mocha as such since the async callback</span>\n<span class=\"token comment\">// will fail the test if an error is passed:</span>\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should do something without error'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">asyncFunc</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'foobarbaz'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// DON'T DO THIS!</span>\n\n<span class=\"token comment\">// However, since the partial doesn't have a `length` property the test will</span>\n<span class=\"token comment\">// complete immediately and the callback will be undefined. The solution is to</span>\n<span class=\"token comment\">// explicity declare async test functions:</span>\n<span class=\"token function\">it</span><span class=\"token punctuation\">(</span><span class=\"token string\">'should do something without error'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">done</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">asyncFunc</span><span class=\"token punctuation\">(</span><span class=\"token string\">'foobarbaz'</span><span class=\"token punctuation\">,</span> done<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>To learn more about testing with Mocha check out <a href=\"/blog/testing-in-browsers-and-node/\" title=\"Testing in Browsers and Node with Mocha, Chai, Sinon, and Testem\">my article on the\nsubject</a> and the <a href=\"http://visionmedia.github.io/mocha/\" title=\"Mocha\">official Mocha documentation</a>.</p>\n<h2>Kinda Partial-Like Things</h2>\n<p>Throughout JavaScript and JavaScript libraries you will find various functions\nwhich take a function as an argument as well as a parameter list to pass to\nthe function. They aren't returning a partial for you to use, but they are an\nopportunity for you to avoid the creation of a partial if you don't have to\nmake one. Take for example <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window.setTimeout\" title=\"MDN - setTimeout\"><code class=\"language-text\">setTimeout</code></a> and\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Window.setInterval\" title=\"MDN - setInterval\"><code class=\"language-text\">setInterval</code></a>:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// Consider the following:</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">function</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">doSomething</span><span class=\"token punctuation\">(</span>foo<span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">,</span> baz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// You may think to compress it with a partial as such:</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token function\">doSomething</span><span class=\"token punctuation\">.</span><span class=\"token function\">bind</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> foo<span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">,</span> baz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// But this isn't really necessary. The following does the same thing:</span>\n<span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span>doSomething<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> foo<span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">,</span> baz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// It also works with setInterval:</span>\n<span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span>doSomething<span class=\"token punctuation\">,</span> <span class=\"token number\">1000</span><span class=\"token punctuation\">,</span> foo<span class=\"token punctuation\">,</span> bar<span class=\"token punctuation\">,</span> baz<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>In compliant JavaScript environments, the extra arguments passed to\n<code class=\"language-text\">setTimeout</code> and <code class=\"language-text\">setInterval</code> are passed to the function when it is called.\nBe careful as you can't specify a context this way -- you will have to rely on\n<a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind\" title=\"Function.prototype.bind\"><code class=\"language-text\">Function.prototype.bind</code></a>, <a href=\"http://underscorejs.org/#bind\" title=\"Underscore.js - Bind\"><code class=\"language-text\">_.bind</code></a>, and\n<a href=\"http://dojotoolkit.org/reference-guide/1.9/dojo/_base/lang.html#hitch\" title=\"Dojo lang.hitch\"><code class=\"language-text\">lang.hitch</code></a> for that.</p>\n<h2>Conclusion</h2>\n<p>Using partials to adapt existing functions to match a given convention is a\nvery powerful technique. <a href=\"https://github.com/caolan/async\" title=\"Async.js\">Async</a> provides more functions which when\ncombined with <a href=\"http://nodejs.org/\" title=\"Node.js\">Node</a> conventions and partials can lead to very concise,\nreadable, and maintainable code. That being said, you will still have to be\ncareful in situations where arguments don't match up properly or where you\nneed to specify a special context for the partially applied function.</p>","frontmatter":{"date":"December 14, 2013","path":"/blog/the-power-and-limitations-of-partials","tags":"javascript, node","title":"The Power and Limitations of Partials"}}},"pageContext":{"refPath":"/blog/the-power-and-limitations-of-partials","prev":{"frontmatter":{"title":"Testing in Browsers and Node with Mocha, Chai, Sinon, and Testem","path":"/blog/testing-in-browsers-and-node"}},"next":{"frontmatter":{"title":"Advanced Features in Sinon","path":"/blog/advanced-features-in-sinon"}}}}}